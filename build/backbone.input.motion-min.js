!function(o,t,n,i){var r="undefined"!=typeof i&&"undefined"!=typeof i.View,c=r?i.View:n.View,a=c.prototype.params||new n.Model;a.set({accelerometer:{x:0,y:0,z:0}});var s=c.extend({options:{monitor:c.prototype.options.monitor||[],motion:{states:["accelerometer"]}},params:a,state:{},initialize:function(o){var e=t.inArray("motion",this.options.monitor);return e&&this._monitorMotion(),c.prototype.initialize.call(this,o)},_monitorMotion:function(){if(this.el){var o=this,e=this.options.motion.states;t.inArray("accelerometer",e)&&(window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(e){o._onMotionAccelerometer([e.alpha,e.beta,e.gamma])},!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(e){o._onMotionAccelerometer([2*e.acceleration.x,2*e.acceleration.y,2*e.acceleration.z])},!0):window.addEventListener("MozOrientation",function(e){o._onMotionAccelerometer([50*e.orientation.x,50*e.orientation.y,50*e.orientation.z])},!0))}},onMotionAccelerometer:function(){},_onMotionAccelerometer:function(o){var n=t.inArray("motion",this.options.monitor)&&t.inArray("accelerometer",this.options.motion.states);n&&(t.inDebug()&&console.log("motion detected",e),this.params.set({motion:{x:o[0],y:o[1],z:o[2]}}),this.trigger("accelerometer",o),this.onMotionAccelerometer(o))}});t.mixin({inArray:function(o,e){return e.indexOf(o)>-1},inDebug:function(){return"undefined"!=typeof DEBUG&&DEBUG}}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=s:"function"==typeof define&&define.amd&&define([],function(){return s}),"object"==typeof window&&"object"==typeof window.document&&(r&&(i.View=s,i.Input=i.Input||{},i.Input.Motion=s,window.APP=i),n.View=s,n.Input=n.Input||{},n.Input.Motion=s,window.Backbone=n)}(this.window,this._,this.Backbone,this.APP);